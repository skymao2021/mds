!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TinyOSS=e():t.TinyOSS=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=5)}([function(t,e,r){"use strict";e.byteLength=function(t){var e=a(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){for(var e,r=a(t),n=r[0],u=r[1],s=new i(function(t,e,r){return 3*(e+r)/4-r}(0,n,u)),c=0,f=u>0?n-4:n,h=0;h<f;h+=4)e=o[t.charCodeAt(h)]<<18|o[t.charCodeAt(h+1)]<<12|o[t.charCodeAt(h+2)]<<6|o[t.charCodeAt(h+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=255&e;2===u&&(e=o[t.charCodeAt(h)]<<2|o[t.charCodeAt(h+1)]>>4,s[c++]=255&e);1===u&&(e=o[t.charCodeAt(h)]<<10|o[t.charCodeAt(h+1)]<<4|o[t.charCodeAt(h+2)]>>2,s[c++]=e>>8&255,s[c++]=255&e);return s},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],u=0,s=r-o;u<s;u+=16383)i.push(f(t,u,u+16383>s?s:u+16383));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=u.length;s<c;++s)n[s]=u[s],o[u.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function f(t,e,r){for(var o,i,u=[],s=e;s<r;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),u.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return u.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){var r={utf8:{stringToBytes:function(t){return r.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(r.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=r},function(t,e,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function u(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,s,c=u(t),a=1;a<arguments.length;a++){for(var f in r=Object(arguments[a]))o.call(r,f)&&(c[f]=r[f]);if(n){s=n(r);for(var h=0;h<s.length;h++)i.call(r,s[h])&&(c[s[h]]=r[s[h]])}}return c}},function(t,e,r){var n,o,i,u,s;n=r(6),o=r(1).utf8,i=r(7),u=r(1).bin,(s=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?u.stringToBytes(t):o.stringToBytes(t):i(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var r=n.bytesToWords(t),c=8*t.length,a=1732584193,f=-271733879,h=-1732584194,p=271733878,d=0;d<r.length;d++)r[d]=16711935&(r[d]<<8|r[d]>>>24)|4278255360&(r[d]<<24|r[d]>>>8);r[c>>>5]|=128<<c%32,r[14+(c+64>>>9<<4)]=c;var y=s._ff,l=s._gg,v=s._hh,g=s._ii;for(d=0;d<r.length;d+=16){var b=a,w=f,A=h,m=p;a=y(a,f,h,p,r[d+0],7,-680876936),p=y(p,a,f,h,r[d+1],12,-389564586),h=y(h,p,a,f,r[d+2],17,606105819),f=y(f,h,p,a,r[d+3],22,-1044525330),a=y(a,f,h,p,r[d+4],7,-176418897),p=y(p,a,f,h,r[d+5],12,1200080426),h=y(h,p,a,f,r[d+6],17,-1473231341),f=y(f,h,p,a,r[d+7],22,-45705983),a=y(a,f,h,p,r[d+8],7,1770035416),p=y(p,a,f,h,r[d+9],12,-1958414417),h=y(h,p,a,f,r[d+10],17,-42063),f=y(f,h,p,a,r[d+11],22,-1990404162),a=y(a,f,h,p,r[d+12],7,1804603682),p=y(p,a,f,h,r[d+13],12,-40341101),h=y(h,p,a,f,r[d+14],17,-1502002290),a=l(a,f=y(f,h,p,a,r[d+15],22,1236535329),h,p,r[d+1],5,-165796510),p=l(p,a,f,h,r[d+6],9,-1069501632),h=l(h,p,a,f,r[d+11],14,643717713),f=l(f,h,p,a,r[d+0],20,-373897302),a=l(a,f,h,p,r[d+5],5,-701558691),p=l(p,a,f,h,r[d+10],9,38016083),h=l(h,p,a,f,r[d+15],14,-660478335),f=l(f,h,p,a,r[d+4],20,-405537848),a=l(a,f,h,p,r[d+9],5,568446438),p=l(p,a,f,h,r[d+14],9,-1019803690),h=l(h,p,a,f,r[d+3],14,-187363961),f=l(f,h,p,a,r[d+8],20,1163531501),a=l(a,f,h,p,r[d+13],5,-1444681467),p=l(p,a,f,h,r[d+2],9,-51403784),h=l(h,p,a,f,r[d+7],14,1735328473),a=v(a,f=l(f,h,p,a,r[d+12],20,-1926607734),h,p,r[d+5],4,-378558),p=v(p,a,f,h,r[d+8],11,-2022574463),h=v(h,p,a,f,r[d+11],16,1839030562),f=v(f,h,p,a,r[d+14],23,-35309556),a=v(a,f,h,p,r[d+1],4,-1530992060),p=v(p,a,f,h,r[d+4],11,1272893353),h=v(h,p,a,f,r[d+7],16,-155497632),f=v(f,h,p,a,r[d+10],23,-1094730640),a=v(a,f,h,p,r[d+13],4,681279174),p=v(p,a,f,h,r[d+0],11,-358537222),h=v(h,p,a,f,r[d+3],16,-722521979),f=v(f,h,p,a,r[d+6],23,76029189),a=v(a,f,h,p,r[d+9],4,-640364487),p=v(p,a,f,h,r[d+12],11,-421815835),h=v(h,p,a,f,r[d+15],16,530742520),a=g(a,f=v(f,h,p,a,r[d+2],23,-995338651),h,p,r[d+0],6,-198630844),p=g(p,a,f,h,r[d+7],10,1126891415),h=g(h,p,a,f,r[d+14],15,-1416354905),f=g(f,h,p,a,r[d+5],21,-57434055),a=g(a,f,h,p,r[d+12],6,1700485571),p=g(p,a,f,h,r[d+3],10,-1894986606),h=g(h,p,a,f,r[d+10],15,-1051523),f=g(f,h,p,a,r[d+1],21,-2054922799),a=g(a,f,h,p,r[d+8],6,1873313359),p=g(p,a,f,h,r[d+15],10,-30611744),h=g(h,p,a,f,r[d+6],15,-1560198380),f=g(f,h,p,a,r[d+13],21,1309151649),a=g(a,f,h,p,r[d+4],6,-145523070),p=g(p,a,f,h,r[d+11],10,-1120210379),h=g(h,p,a,f,r[d+2],15,718787259),f=g(f,h,p,a,r[d+9],21,-343485551),a=a+b>>>0,f=f+w>>>0,h=h+A>>>0,p=p+m>>>0}return n.endian([a,f,h,p])})._ff=function(t,e,r,n,o,i,u){var s=t+(e&r|~e&n)+(o>>>0)+u;return(s<<i|s>>>32-i)+e},s._gg=function(t,e,r,n,o,i,u){var s=t+(e&n|r&~n)+(o>>>0)+u;return(s<<i|s>>>32-i)+e},s._hh=function(t,e,r,n,o,i,u){var s=t+(e^r^n)+(o>>>0)+u;return(s<<i|s>>>32-i)+e},s._ii=function(t,e,r,n,o,i,u){var s=t+(r^(e|~n))+(o>>>0)+u;return(s<<i|s>>>32-i)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(s(t,e));return e&&e.asBytes?r:e&&e.asString?u.bytesToString(r):n.bytesToHex(r)}},function(t,e,r){
/*! ***** BEGIN LICENSE BLOCK *****
 *!
 *! Copyright 2011-2012, 2014 Jean-Christophe Sirot <sirot@chelonix.com>
 *!
 *! This file is part of digest.js
 *!
 *! digest.js is free software: you can redistribute it and/or modify it under
 *! the terms of the GNU General Public License as published by the Free Software
 *! Foundation, either version 3 of the License, or (at your option) any later
 *! version.
 *!
 *! digest.js is distributed in the hope that it will be useful, but
 *! WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 *! or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
 *! more details.
 *!
 *! You should have received a copy of the GNU General Public License along with
 *! digest.js. If not, see http://www.gnu.org/licenses/.
 *!
 *! ***** END LICENSE BLOCK *****  */
!function(){"use strict";ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(t,e){var r,n=new Uint8Array(this);void 0===e&&(e=n.length);var o=new ArrayBuffer(e-t),i=new Uint8Array(o);for(r=0;r<i.length;r++)i[r]=n[r+t];return o})}(),function(e){"use strict";function r(){}r.prototype.processBlock=function(t){var e,r,n=this.current[0],o=this.current[1],i=this.current[2],u=this.current[3],s=this.current[4],c=[t[0]<<24|t[1]<<16|t[2]<<8|t[3],t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[8]<<24|t[9]<<16|t[10]<<8|t[11],t[12]<<24|t[13]<<16|t[14]<<8|t[15],t[16]<<24|t[17]<<16|t[18]<<8|t[19],t[20]<<24|t[21]<<16|t[22]<<8|t[23],t[24]<<24|t[25]<<16|t[26]<<8|t[27],t[28]<<24|t[29]<<16|t[30]<<8|t[31],t[32]<<24|t[33]<<16|t[34]<<8|t[35],t[36]<<24|t[37]<<16|t[38]<<8|t[39],t[40]<<24|t[41]<<16|t[42]<<8|t[43],t[44]<<24|t[45]<<16|t[46]<<8|t[47],t[48]<<24|t[49]<<16|t[50]<<8|t[51],t[52]<<24|t[53]<<16|t[54]<<8|t[55],t[56]<<24|t[57]<<16|t[58]<<8|t[59],t[60]<<24|t[61]<<16|t[62]<<8|t[63]];for(r=16;r<80;r++)c.push((c[r-3]^c[r-8]^c[r-14]^c[r-16])<<1|(c[r-3]^c[r-8]^c[r-14]^c[r-16])>>>31);for(r=0;r<80;r++)e=(n<<5|n>>>27)+s+c[r],e+=r<20?1518500249+(o&i|~o&u)|0:r<40?1859775393+(o^i^u)|0:r<60?2400959708+(o&i|o&u|i&u)|0:3395469782+(o^i^u)|0,s=u,u=i,i=o<<30|o>>>2,o=n,n=e;this.current[0]+=n,this.current[1]+=o,this.current[2]+=i,this.current[3]+=u,this.current[4]+=s,this.currentLen+=64},r.prototype.doPadding=function(){var t=4294967295&8*(this.inLen+this.currentLen),e=this.inLen<=55?55-this.inLen:119-this.inLen,r=new Uint8Array(new ArrayBuffer(e+1+8));return r[0]=128,r[r.length-1]=255&t,r[r.length-2]=t>>>8&255,r[r.length-3]=t>>>16&255,r[r.length-4]=t>>>24&255,r[r.length-5]=0,r[r.length-6]=0,r[r.length-7]=0,r[r.length-8]=0,r},r.prototype.getDigest=function(){var t=new Uint8Array(new ArrayBuffer(20));return t[3]=255&this.current[0],t[2]=this.current[0]>>>8&255,t[1]=this.current[0]>>>16&255,t[0]=this.current[0]>>>24&255,t[7]=255&this.current[1],t[6]=this.current[1]>>>8&255,t[5]=this.current[1]>>>16&255,t[4]=this.current[1]>>>24&255,t[11]=255&this.current[2],t[10]=this.current[2]>>>8&255,t[9]=this.current[2]>>>16&255,t[8]=this.current[2]>>>24&255,t[15]=255&this.current[3],t[14]=this.current[3]>>>8&255,t[13]=this.current[3]>>>16&255,t[12]=this.current[3]>>>24&255,t[19]=255&this.current[4],t[18]=this.current[4]>>>8&255,t[17]=this.current[4]>>>16&255,t[16]=this.current[4]>>>24&255,t.buffer},r.prototype.reset=function(){this.currentLen=0,this.inLen=0,this.current=new Uint32Array(new ArrayBuffer(20)),this.current[0]=1732584193,this.current[1]=4023233417,this.current[2]=2562383102,this.current[3]=271733878,this.current[4]=3285377520},r.prototype.blockLen=64,r.prototype.digestLen=20;var n=function(t){if(t.constructor===Uint8Array)return t;if(t.constructor===ArrayBuffer)return new Uint8Array(t);if(t.constructor===String)return function(t){var e,r=new ArrayBuffer(t.length),n=new Uint8Array(r);for(e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}(t);if(t.constructor===Number){if(t>255)throw"For more than one byte, use an array buffer";if(t<0)throw"Input value must be positive";return e=t,r=new ArrayBuffer(1),(n=new Uint8Array(r))[0]=e,n}throw"Unsupported type";var e,r,n},o=function(t){var e=function(t){for(var e=t.length,r=0;e>0;){var n=this.blockLen-this.inLen;n>e&&(n=e);var o=t.subarray(r,r+n);this.inbuf.set(o,this.inLen),r+=n,e-=n,this.inLen+=n,this.inLen===this.blockLen&&(this.processBlock(this.inbuf),this.inLen=0)}},r=function(){var t=this.doPadding();this.update(t);var e=this.getDigest();return this.reset(),e},o=function(){if(!t)throw"Unsupported algorithm: "+t.toString();t.prototype.update=e,t.prototype.finalize=r;var n=new t;return n.inbuf=new Uint8Array(new ArrayBuffer(n.blockLen)),n.reset(),n}();return{update:function(t){o.update(n(t))},finalize:function(){return o.finalize()},digest:function(t){return o.update(n(t)),o.finalize()},reset:function(){o.reset()},digestLength:function(){return o.digestLen}}},i=function(t){var e,r,o,i=!1,u=function(){var n,u;if(!i){if(void 0===e)throw"MAC key is not defined";for(u=e.byteLength>64?new Uint8Array(t.digest(e)):new Uint8Array(e),r=new Uint8Array(new ArrayBuffer(64)),n=0;n<u.length;n++)r[n]=54^u[n];for(n=u.length;n<64;n++)r[n]=54;for(o=new Uint8Array(new ArrayBuffer(64)),n=0;n<u.length;n++)o[n]=92^u[n];for(n=u.length;n<64;n++)o[n]=92;i=!0,t.update(r.buffer)}},s=function(){i=!1,e=void 0,r=void 0,o=void 0,t.reset()},c=function(t){e=t};return{setKey:function(t){c(n(t)),u()},update:function(e){t.update(e)},finalize:function(){return e=t.finalize(),t.reset(),t.update(o.buffer),t.update(e),e=t.finalize(),s(),e;var e},mac:function(t){return this.update(t),this.finalize()},reset:function(){s()},hmacLength:function(){return t.digestLength()}}},u={SHA1:function(){return o(r)},HMAC_SHA1:function(){return i(o(r))}};t.exports?t.exports=u:u}()},function(t,e,r){t.exports=r(8).default},function(t,e){var r,n;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var e=[],n=0;n<t.length;n+=3)for(var o=t[n]<<16|t[n+1]<<8|t[n+2],i=0;i<4;i++)8*n+6*i<=8*t.length?e.push(r.charAt(o>>>6*(3-i)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],n=0,o=0;n<t.length;o=++n%4)0!=o&&e.push((r.indexOf(t.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|r.indexOf(t.charAt(n))>>>6-2*o);return e}},t.exports=n},function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,r){"use strict";r.r(e);var n=r(2),o=r.n(n);function i(t,e){return void 0===e&&(e={}),new Promise((function(r,n){var o,i=e,u=i.async,s=void 0===u||u,c=i.data,a=void 0===c?null:c,f=i.headers,h=void 0===f?{}:f,p=i.method,d=void 0===p?"get":p,y=i.timeout,l=void 0===y?0:y,v=i.onprogress,g=new XMLHttpRequest;l&&(o=setTimeout((function(){n(new Error("the request timeout "+l+"ms"))}),l)),g.onerror=function(){n(new Error("unknown error"))},g.upload&&(g.upload.onprogress=v),g.onreadystatechange=function(){if(4===g.readyState)if(l&&clearTimeout(o),g.status>=200&&g.status<300)r(g.response,g);else{var t=new Error("the request is error");n(t)}},g.open(d,t,s),Object.keys(h).forEach((function(t){g.setRequestHeader(t,h[t])}));try{g.send(a)}catch(t){n(t)}}))}var u=r(3),s=r.n(u),c=r(0),a=r.n(c),f=r(4),h=r.n(f);function p(t){var e,r;return t&&(e=new Date(t)),(r=e)&&"[object Date]"===Object.prototype.toString.call(r)&&"Invalid Date"!==r.toString||(e=new Date),Math.round(e.getTime()/1e3)}function d(t){var e=Array.prototype.slice.call(t,0),r=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t[r]+t[r+1],16));return Uint8Array.from(e)}(s()(e));return a.a.fromByteArray(r)}function y(t){void 0===t&&(t={});var e=t,r=e.type,n=void 0===r?"header":r,o=e.verb,i=void 0===o?"":o,u=e.contentMd5,s=void 0===u?"":u,c=e.expires,f=void 0===c?p()+3600:c,d=e.bucket,y=e.objectName,l=e.accessKeySecret,v=e.headers,g=void 0===v?{}:v,b=e.subResource,w=g["x-oss-date"]||"",A=[i,s,g["Content-Type"]||""];"header"===n?A.push(w):A.push(f);var m=function(t){var e="",r=Object.keys(t);return(r=r.map((function(t){return t.toLowerCase()}))).sort(),r.forEach((function(r){0===r.indexOf("x-oss-")&&(e+=r+":"+t[r]+"\n")})),e}(g),S=function(t,e,r){void 0===t&&(t=""),void 0===e&&(e="");var n="";t&&(n+="/"+t),e&&("/"!==e.charAt(0)&&(n+="/"),n+=e);var o=""+n,i="?";if(r){Object.keys(r).sort((function(t,e){return t[0]>e[0]?1:t[0]<e[0]?-1:0})).forEach((function(t){o+=i+t,r[t]&&(o+="="+r[t]),i="&"}))}return o}(d,y,b);A.push(""+m+S);var j=A.join("\n"),O=new h.a.HMAC_SHA1;O.setKey(l),O.update(j);var x=new Uint8Array(O.finalize());return a.a.fromByteArray(x)}r.d(e,"default",(function(){return l}));var l=function(){function t(t){void 0===t&&(t={}),function(t){var e=t.accessKeyId,r=t.accessKeySecret,n=t.bucket,o=t.endpoint;if(!e)throw new Error("need accessKeyId");if(!r)throw new Error("need accessKeySecret");if(!n&&!o)throw new Error("need bucket or endpoint")}(t),this.opts=o()({region:"oss-cn-hangzhou",internal:!1,cname:!1,secure:!1,timeout:6e4},t);var e=this.opts,r=e.bucket,n=e.region,i=e.endpoint,u=e.internal;if(this.host="",i)this.host=i;else{var s=r;u&&(s+="-internal"),s+="."+n+".aliyuncs.com",this.host=s}}var e=t.prototype;return e.put=function(t,e,r){var n=this;return void 0===r&&(r={}),new Promise((function(o,u){(function(t){return new Promise((function(e,r){var n=new FileReader;n.onload=function(){var t=new Uint8Array(n.result);e(t)},n.onerror=function(){r(n.error)},n.readAsArrayBuffer(t)}))})(e).then((function(o){var u=n.opts,s=u.accessKeyId,c=u.accessKeySecret,a=u.stsToken,f=u.bucket,h=d(o),p={"Content-Md5":h,"Content-Type":e.type,"x-oss-date":(new Date).toGMTString()};a&&(p["x-oss-security-token"]=a);var l=y({verb:"PUT",contentMd5:h,headers:p,bucket:f,objectName:t,accessKeyId:s,accessKeySecret:c});return p.Authorization="OSS "+s+":"+l,i((n.opts.secure?"https":"http")+"://"+n.host+"/"+t,{method:"PUT",headers:p,data:e,timeout:n.opts.timeout,onprogress:r.onprogress})})).then(o).catch(u)}))},e.putSymlink=function(t,e){var r=this.opts,n=r.accessKeyId,o=r.accessKeySecret,u=r.stsToken,s=r.bucket,c={"x-oss-date":(new Date).toGMTString(),"x-oss-symlink-target":encodeURI(e)};u&&(c["x-oss-security-token"]=u);var a=y({verb:"PUT",headers:c,bucket:s,objectName:t,accessKeyId:n,accessKeySecret:o,subResource:{symlink:""}});return c.Authorization="OSS "+n+":"+a,i((this.opts.secure?"https":"http")+"://"+this.host+"/"+t+"?symlink",{method:"PUT",headers:c,timeout:this.opts.timeout})},e.signatureUrl=function(t,e){void 0===e&&(e={});var r=e,n=r.expires,o=void 0===n?1800:n,i=r.method,u=r.process,s=r.response,c=this.opts,a=c.accessKeyId,f=c.accessKeySecret,h=c.stsToken,d=c.bucket,l={},v={};if(u){v["x-oss-process"]=u}s&&Object.keys(s).forEach((function(t){var e="response-"+t.toLowerCase();v[e]=s[t]})),Object.keys(e).forEach((function(t){var r=t.toLowerCase(),n=e[t];0===r.indexOf("x-oss-")?l[r]=n:0===r.indexOf("content-md5")||0===r.indexOf("content-type")?l[t]=n:"expires"!==r&&"response"!==r&&"process"!==r&&"method"!==r&&(v[r]=n)}));var g=e["security-token"]||h;g&&(v["security-token"]=g);var b=p()+o,w=y({type:"url",verb:i||"GET",accessKeyId:a,accessKeySecret:f,bucket:d,objectName:t,headers:l,subResource:v,expires:b}),A=(this.opts.secure?"https":"http")+"://"+this.host+"/"+t;return A+="?OSSAccessKeyId="+a,A+="&Expires="+b,A+="&Signature="+encodeURIComponent(w),Object.keys(v).forEach((function(t){A+="&"+t+"="+encodeURIComponent(v[t])})),A},t}()}])}));
//# sourceMappingURL=tiny-oss.min.js.map